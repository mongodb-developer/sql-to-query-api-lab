import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# üëê ORDER BY ‚Üí .sort() & LIMIT ‚Üí .limit()

In SQL, we use `ORDER BY` to sort query results and `LIMIT` to restrict the number of returned rows. MongoDB provides the `.sort()` and `.limit()` methods to achieve the same.

---

## **Sorting in MongoDB**

- `{ field: 1 }` ‚Üí **Ascending order** (A ‚Üí Z, smallest to largest)
- `{ field: -1 }` ‚Üí **Descending order** (Z ‚Üí A, largest to smallest)
- You can sort by multiple fields, just like SQL.

## **Limiting results**

- `.limit(n)` restricts the number of documents returned.
- Used together with `.sort()`, it helps fetch the **top N** results.

---

### 1: Top 5 books with the highest inventory

```js
db.books.find().sort({ totalInventory: -1 }).limit(5);
```

**Equivalent SQL query:**

```sql
SELECT * FROM books ORDER BY totalInventory DESC LIMIT 5;
```

This fetches the **5 books with the highest stock**.

---

### 2: Get the title of top 10 fiction books by highest page count

```js
db.books
  .find({ "genres": "Fiction" }, { title: 1, pages: 1 })
  .sort({ pages: -1 })
  .limit(10);
```

:::info

Along with the title, we fetched pages, as well, to ensure that we are getting the right results.

:::

**Equivalent SQL query:**

```sql
SELECT title, pages FROM books WHERE genres='Fiction' ORDER BY pages DESC LIMIT 10;
```

This returns the **top 10 available books** in the "Science Fiction" genre.

---

## Challenge

### üëê 1. Find the first 10 books alphabetically by `title`.

<details>
  <summary>Answer</summary>
  <Tabs groupId="challenges" defaultValue={"javascript"}>
    <TabItem value="javascript" label="JavaScript">
      <div>
          ```js
          const cursor = await books.find({}).sort({title: 1}).limit(10);

          await cursor.forEach((b) => {
              console.log(b);
          });
          ```
        </div>
    </TabItem>
    <TabItem value="mongosh" label="mongosh">
      <div>
        ```js
        db.books.find({}).sort({title: 1}).limit(10)
        ```
      </div>
    </TabItem>
    <TabItem value="csharp" label="C#">
      <div>
        ```csharp
        var projection = Builders<Book>.Projection.Include(b => b.Title).Include(b => b.Pages);
        var ascendingTitleSort = Builders<Book>.Sort.Ascending("title");

        List<Book> topBooks = booksCollection.Find(b => true) // Empty filter to find all books
          .Project<Book>(projection)
          .Sort(ascendingTitleSort)
          .Limit(10).ToList();
        ```
      </div>
    </TabItem>
    <TabItem value="python" label="Python">
      <div>
        ```python
        books_sorted_by_title = books.find({}).sort("title", 1).limit(10)

        for book in books_sorted_by_title:
            print(book)
        ```
      </div>
    </TabItem>
  </Tabs>
</details>
