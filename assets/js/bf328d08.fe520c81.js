"use strict";(self.webpackChunkdocusaurus_template_lab=self.webpackChunkdocusaurus_template_lab||[]).push([["8422"],{5561:function(e,n,i){i.r(n),i.d(n,{default:()=>p,frontMatter:()=>o,metadata:()=>s,assets:()=>r,toc:()=>l,contentTitle:()=>d});var s=JSON.parse('{"id":"CRUD/UPDATE","title":"\uD83D\uDC50 UPDATE \u2192 updateOne(), updateMany()","description":"To modify existing documents, MongoDB provides:","source":"@site/docs/40-CRUD/5-UPDATE.mdx","sourceDirName":"40-CRUD","slug":"/CRUD/UPDATE","permalink":"/sql-to-query-api-lab/docs/CRUD/UPDATE","draft":false,"unlisted":false,"editUrl":"https://github.com/mongodb-developer/sql-to-query-api-lab/blob/main/docs/40-CRUD/5-UPDATE.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\uD83D\uDC50 INSERT \u2192 insertOne() & DELETE \u2192 deleteOne()","permalink":"/sql-to-query-api-lab/docs/CRUD/INSERT-DELETE"},"next":{"title":"\uD83D\uDC50 Aggregation Pipelines","permalink":"/sql-to-query-api-lab/docs/category/-aggregation-pipelines"}}'),t=i("5893"),a=i("65");let o={},d="\uD83D\uDC50 UPDATE \u2192 updateOne(), updateMany()",r={},l=[{value:"Syntax",id:"syntax",level:2},{value:"Example: Update a book",id:"example-update-a-book",level:2},{value:"Equivalent SQL Query",id:"equivalent-sql-query",level:3},{value:"Upsert option",id:"upsert-option",level:2},{value:"Exercises",id:"exercises",level:2}];function c(e){let n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-update--updateone-updatemany",children:"\uD83D\uDC50 UPDATE \u2192 updateOne(), updateMany()"})}),"\n",(0,t.jsx)(n.p,{children:"To modify existing documents, MongoDB provides:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:".updateOne()"}),": Updates the first matching document."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:".updateMany()"}),": Updates all matching documents."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"db.collection.updateOne(\n  { <query> },\n  { <update operation> },\n  { <options> }\n)\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"<query>"}),": Specifies which document to update."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"<update operation>"}),": Defines modifications using update operators like $set, $inc, etc."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"<options>"}),": (Optional) Allows additional configurations like upsert: true."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"example-update-a-book",children:"Example: Update a book"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'db.reviews.updateOne(\n  { bookId: "0312979509" }, // <-- query\n  { $set: { rating: 5 } } // <-- update operation\n);\n'})}),"\n",(0,t.jsx)(n.h3,{id:"equivalent-sql-query",children:"Equivalent SQL Query"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"UPDATE reviews SET rating = 5 WHERE bookId = '0312979509';\n"})}),"\n",(0,t.jsx)(n.h2,{id:"upsert-option",children:"Upsert option"}),"\n",(0,t.jsx)(n.p,{children:'Let\'s say, we want to update a review in our database from "John" for the book "0312979509" by rating it 5 stars.'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'db.reviews.updateOne(\n  { name: "John", bookId: "0312979509" },\n  { $set: { rating: 5 } }\n);\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Suppose \"John\" had never posted a review for this book before, the above query won't really do anything.\nIn some cases, we may want to store a fresh new review based on the condition and updates mentioned in query.\nTo handle such scenarios in MongoDB, we don't have to write additional application code to achieve this, all we have to do is- utilize the ",(0,t.jsx)(n.code,{children:"upsert"})," option."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'db.reviews.updateOne(\n  { name: "John", bookId: "0312979509" },\n  { $set: { rating: 5 } },\n  { upsert: true } //<-- option\n);\n'})}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsx)(n.p,{children:"Executing the above command, will insert a fresh new document in the collection like this:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"{\n  _id: ObjectId('679d...'),\n  bookId: '0312979509',\n  name: 'John',\n  rating: 5\n}\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'\uD83D\uDC50 Update the pages of "NoSQL Guide" to 450.'}),"\n",(0,t.jsx)(n.li,{children:"\uD83D\uDC50 Update all books published before 2000 to have isClassic: true."}),"\n",(0,t.jsx)(n.li,{children:"\uD83D\uDC50 What happens if no document matches the update query?"}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);