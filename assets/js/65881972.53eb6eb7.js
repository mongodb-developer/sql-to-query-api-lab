"use strict";(self.webpackChunkdocusaurus_template_lab=self.webpackChunkdocusaurus_template_lab||[]).push([["9758"],{6926:function(e,t,a){a.r(t),a.d(t,{default:()=>c,frontMatter:()=>r,metadata:()=>n,assets:()=>i,toc:()=>d,contentTitle:()=>s});var n=JSON.parse('{"id":"aggregation/match-project","title":"\uD83D\uDC50 $match and $project","description":"MongoDB\u2019s Aggregation Framework allows for powerful data transformations and analysis. The $match, $project, and $sort stages are fundamental building blocks of an aggregation pipeline.","source":"@site/docs/50-aggregation/2-match-project.mdx","sourceDirName":"50-aggregation","slug":"/aggregation/match-project","permalink":"/sql-to-query-api-lab/docs/aggregation/match-project","draft":false,"unlisted":false,"editUrl":"https://github.com/mongodb-developer/sql-to-query-api-lab/blob/main/docs/50-aggregation/2-match-project.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\uD83D\uDCD8 Intro to Aggregation Pipelines","permalink":"/sql-to-query-api-lab/docs/aggregation/aggregation-intro"},"next":{"title":"\uD83D\uDC50 $sort and $limit","permalink":"/sql-to-query-api-lab/docs/aggregation/sort-limit"}}'),l=a("5893"),o=a("65");let r={},s="\uD83D\uDC50 $match and $project",i={},d=[{value:"<strong>\uD83D\uDD39 $match \u2192 Filtering data</strong>",id:"-match--filtering-data",level:2},{value:"<strong>Syntax</strong>",id:"syntax",level:3},{value:"Example: Get all the books that were published after the year 2010",id:"example-get-all-the-books-that-were-published-after-the-year-2010",level:3},{value:"<strong>\uD83D\uDD39 $project \u2192 Selecting fields</strong>",id:"-project--selecting-fields",level:2},{value:"<strong>Syntax</strong>",id:"syntax-1",level:3},{value:"Example: Get all the books published after the year 2010. The output should only include the title, year, and page count of the book.",id:"example-get-all-the-books-published-after-the-year-2010-the-output-should-only-include-the-title-year-and-page-count-of-the-book",level:3},{value:"<strong>Equivalent SQL query</strong>",id:"equivalent-sql-query",level:3},{value:"<strong>Computed fields example:</strong> Along with the title and authors, also output the count of authors for every book in the database.",id:"computed-fields-example-along-with-the-title-and-authors-also-output-the-count-of-authors-for-every-book-in-the-database",level:3},{value:"Challenge \uD83D\uDE80",id:"challenge-",level:2},{value:"\uD83D\uDC50 1. Find books with more than 2 available copies.",id:"-1-find-books-with-more-than-2-available-copies",level:3},{value:"\uD83D\uDC50 2. Find books with more than 2 available copies. Return only book titles and publication year.",id:"-2-find-books-with-more-than-2-available-copies-return-only-book-titles-and-publication-year",level:3}];function h(e){let t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components},{Details:a}=t;return a||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"-match-and-project",children:"\uD83D\uDC50 $match and $project"})}),"\n",(0,l.jsxs)(t.p,{children:["MongoDB\u2019s ",(0,l.jsx)(t.strong,{children:"Aggregation Framework"})," allows for powerful data transformations and analysis. The ",(0,l.jsx)(t.strong,{children:"$match"}),", ",(0,l.jsx)(t.strong,{children:"$project"}),", and ",(0,l.jsx)(t.strong,{children:"$sort"})," stages are fundamental building blocks of an aggregation pipeline."]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"-match--filtering-data",children:(0,l.jsx)(t.strong,{children:"\uD83D\uDD39 $match \u2192 Filtering data"})}),"\n",(0,l.jsxs)(t.p,{children:["Just like ",(0,l.jsx)(t.code,{children:".find()"})," based on the query mentioned, the ",(0,l.jsx)(t.code,{children:"$match"})," stage filters documents from the collection."]}),"\n",(0,l.jsx)(t.h3,{id:"syntax",children:(0,l.jsx)(t.strong,{children:"Syntax"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:"{ $match: { <query> } }\n"})}),"\n",(0,l.jsx)(t.h3,{id:"example-get-all-the-books-that-were-published-after-the-year-2010",children:"Example: Get all the books that were published after the year 2010"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:"db.books.aggregate([\n  {\n    $match: { year: { $gt: 2010 } },\n  },\n]);\n"})}),"\n",(0,l.jsx)(t.admonition,{type:"info",children:(0,l.jsxs)(t.p,{children:["Place ",(0,l.jsx)(t.code,{children:"$match"})," as early as possible in the pipeline to reduce the number of documents processed in later stages."]})}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"-project--selecting-fields",children:(0,l.jsx)(t.strong,{children:"\uD83D\uDD39 $project \u2192 Selecting fields"})}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["The ",(0,l.jsx)(t.code,{children:"$project"})," stage controls which fields are included in the output."]}),"\n",(0,l.jsx)(t.li,{children:"It can also be used for adding computed fields to the results."}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"syntax-1",children:(0,l.jsx)(t.strong,{children:"Syntax"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:"{\n  $project: {\n    field1: 1,\n    field2: 1,\n    _id: 0\n  }\n}\n"})}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"1"}),": Include the field"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"0"}),": Exclude the field"]}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"example-get-all-the-books-published-after-the-year-2010-the-output-should-only-include-the-title-year-and-page-count-of-the-book",children:"Example: Get all the books published after the year 2010. The output should only include the title, year, and page count of the book."}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:"db.books.aggregate([\n  {\n    $match: { year: { $gt: 2010 } },\n  },\n  {\n    $project: {\n      title: 1,\n      year: 1,\n      pages: 1,\n      _id: 0,\n    },\n  },\n]);\n"})}),"\n",(0,l.jsx)(t.h3,{id:"equivalent-sql-query",children:(0,l.jsx)(t.strong,{children:"Equivalent SQL query"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-sql",children:"SELECT title, year, pages FROM books WHERE year>2010;\n"})}),"\n",(0,l.jsxs)(t.h3,{id:"computed-fields-example-along-with-the-title-and-authors-also-output-the-count-of-authors-for-every-book-in-the-database",children:[(0,l.jsx)(t.strong,{children:"Computed fields example:"})," Along with the title and authors, also output the count of authors for every book in the database."]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:'db.books.aggregate([\n  {\n    $project: {\n      title: 1,\n      authors: 1,\n      authorCount: { $size: "$authors" },\n    },\n  },\n]);\n'})}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"challenge-",children:"Challenge \uD83D\uDE80"}),"\n",(0,l.jsx)(t.h3,{id:"-1-find-books-with-more-than-2-available-copies",children:"\uD83D\uDC50 1. Find books with more than 2 available copies."}),"\n",(0,l.jsxs)(a,{children:[(0,l.jsx)("summary",{children:"Answer"}),(0,l.jsx)("div",{children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:"  db.books.aggregate([\n    { $match: {available: {$gt: 2}}}\n  ]);\n"})})})]}),"\n",(0,l.jsx)(t.h3,{id:"-2-find-books-with-more-than-2-available-copies-return-only-book-titles-and-publication-year",children:"\uD83D\uDC50 2. Find books with more than 2 available copies. Return only book titles and publication year."}),"\n",(0,l.jsxs)(a,{children:[(0,l.jsx)("summary",{children:"Answer"}),(0,l.jsx)("div",{children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:"  db.books.aggregate([\n    { $match: {available: {$gt: 2}}},\n    { $project: {title: 1, year: 1, _id: 0}}\n  ]);\n"})})})]})]})}function c(e={}){let{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);